<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>资源列表</title>
<meta http-equiv="Content-Type" content="text/html; charset=GB2312" />
<!-- 
<link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet"
	type="text/css" th:href="@{/bootstrap/css/bootstrap.min.css}" />
<link href="/themes/blue/style.css" rel="stylesheet" type="text/css"
	th:href="@{/themes/blue/style.css}" />
	
	<link rel="stylesheet" type="text/css" media="screen"
	href="/css/ui.multiselect.css" th:href="@{/css/ui.multiselect.css}" />
	
-->
<link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet"
	type="text/css" th:href="@{/bootstrap/css/bootstrap.min.css}" />
<link rel="stylesheet" type="text/css"
	href="/css/ui-lightness/jquery-ui-1.10.0.custom.css"
	th:href="@{/css/ui-lightness/jquery-ui-1.10.0.custom.css}" />
<link href="/bootstrap/css/DT_bootstrap.css" rel="stylesheet"
	type="text/css" th:href="@{/bootstrap/css/DT_bootstrap.css}" />
<link href="/bootstrap/css/prettify.css" rel="stylesheet"
	type="text/css" th:href="@{/bootstrap/css/prettify.css}" />
<script src="/scripts/jquery-1.10.2.min.js" type="text/javascript"
	th:src="@{/scripts/jquery-1.10.2.min.js}"></script>
<script src="/scripts/jquery-ui-1.10.3.custom.min.js"
	type="text/javascript"
	th:src="@{/scripts/jquery-ui-1.10.3.custom.min.js}"></script>
<script src="/bootstrap/js/bootstrap.min.js" type="text/javascript"
	th:src="@{/bootstrap/js/bootstrap.min.js}"></script>
<script src="/bootstrap/js/bootstrap-paginator.js"
	type="text/javascript" th:src="@{/bootstrap/js/bootstrap-paginator.js}"></script>
<script src="/bootstrap/js/jquery.dataTables.js" type="text/javascript"
	th:src="@{/bootstrap/js/jquery.dataTables.js}"></script>
<script src="/bootstrap/js/datatablesBootstrap.js"
	type="text/javascript" th:src="@{/bootstrap/js/datatablesBootstrap.js}"></script>
<script src="/scripts/json2.js" type="text/javascript"
	th:src="@{/scripts/json2.js}"></script>
<script type="text/javascript" th:inline="javascript">
	/*<![CDATA[*/
	$(document)
			.ready(
					function() {

						$
								.ajax({
									url : "listPermissions?sort=name&order=desc",
									success : function(data) {
										count = Number(data.count);
										start = Number(data.start);
										size = Number(data.size);

										remainder = (count - start) % size;

										var options = {
											currentPage : start / size + 1,
											totalPages : (count - remainder)
													/ size + 1,
											itemContainerClass : function(type,
													page, current) {
												return (page === current) ? "active"
														: "pointer-cursor";
											}
										};
										for (i = 0; i < data.tasks.length; i++) {
											var newRow = "<tr><td><input type=\"checkbox\" /></td><td>"
													+ data.tasks[i].id
													+ "</td><td>"
													+ data.tasks[i].name
													+ "</td><td>"
													+ data.tasks[i].assignee
													+ "</td><td><a href=\"claim/"+data.tasks[i].id+"\">接受</a></td></tr>";
											$("#taskList tr:last")
													.after(newRow);

										}

										$("#taskList tr:gt(0)").hover(
												function() {
													$(this).addClass("hover")
												},
												function() {
													$(this)
															.removeClass(
																	"hover")
												});
										$("#taskList td")
												.click(
														function() {
															var tdSeq = $(this)
																	.parent()
																	.find("td")
																	.index(
																			$(this));
															var trSeq = $(this)
																	.parent()
																	.parent()
																	.find("tr")
																	.index(
																			$(
																					this)
																					.parent());
															alert("第"
																	+ (trSeq)
																	+ "行，第"
																	+ (tdSeq + 1)
																	+ "列");
														});
										$('#paginator').bootstrapPaginator(
												options);

									}
								});

					});
	/*]]>*/
</script>
<style>
.hover {
	background-color: #cccc00;
}
</style>
</head>
<body>
	<div class="box">
		<h1>资源列表</h1>
		<table id="taskList" cellpadding="0" cellspacing="0" border="0"
			class="table table-striped table-bordered">
			<thead>
				<tr>
					<th><input type="checkbox" name="check" value="" /></th>
					<th>任务ID</th>
					<th>任务名称</th>
					<th>任务实施者</th>
					<th>动作</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="task:${tasks}">
					<td><input type="checkbox" name="check" value="" /></td>
					<td>id</td>
					<td>name</td>
					<td>assignee</td>
					<td>action</td>
				</tr>
			</tbody>
		</table>
		<div id="paginator"></div>
		<input type="button" id="addBtn" value="增加" class="btn btn-primary" />
		<input type="button" id="deleteBtn" value="删除选中"
			class="btn btn-danger" />
	</div>
	<div id="create" title="创建"></div>
</body>
</html>
