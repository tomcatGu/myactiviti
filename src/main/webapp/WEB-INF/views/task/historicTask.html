<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<head thy:merge="/common::headerFragment">
<title>历史任务列表</title>
<script type="text/javascript" th:inline="javascript">
	/*<![CDATA[*/
	function render(data) {
		var newRow = "<tr><td><input type=\"checkbox\" /></td><td>"
				+ data.id
				+ "</td><td><a href=\""+/*[[@{/runtime/tasks/reviewHistoric/}]]*/""
				+data.id+"?processDefinitionId="+data.processDefinitionId
				+"&taskDefinitionKey="+data.taskDefinitionKey
				+"\">"
				+ data.name + "</a></td><td>" + data.assignee + "</td><td>"
				+ data.endTime.toString() + "</td></tr>";
		return newRow;
	};
	$(document).ready(
			function() {

				$("#taskList").simpleTable(
						"listHistoryTasks?sort=name&order=desc", render,
						$("#paginator"), null);

				$('#selectBtn').bind(
						'click',
						function() {

							$("#selectUsers").load(
									'../../user/select' + '?'
											+ (new Date()).valueOf(),
									function(data) {
										$("#selectUsers").bind(
												"evtSelectUser",
												function(evt, data) {
													console.log(data);
													$('#selectUsers').modal(
															"hide");
												});
										$("#selectUsers").bind(
												"evtCancled",
												function(evt, data) {
													console.log(data);
													$('#selectUsers').modal(
															"hide");
												});
										$('#selectUsers').modal();

									});

						});
			});
	/*]]>*/
</script>
<style>
.hover {
	background-color: #cccc00;
}
</style>
</head>
<body>
	<div class="box">
		<div class="row">
			<input name="keyword" /> <input type="button" id="fulltextSearch"
				value="全文检索" />
		</div>
		<h1>任务列表</h1>
		<table id="taskList" cellpadding="0" cellspacing="0" border="0"
			class="table table-striped table-bordered">
			<thead>
				<tr>
					<th><input type="checkbox" name="check" value="" /></th>
					<th>任务ID</th>
					<th>任务名称</th>
					<th>任务实施者</th>
					<th>结束时间</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="task:${tasks}">
					<td><input type="checkbox" name="check" value="" /></td>
					<td>id</td>
					<td>name</td>
					<td>assignee</td>
					<td>endTime</td>
				</tr>
			</tbody>
		</table>
		<div id="paginator"></div>
		<input type="button" id="addBtn" value="增加" class="btn btn-primary" />
		<input type="button" id="deleteBtn" value="删除选中"
			class="btn btn-danger" /> <input type="button" id="selectBtn"
			value="选择用户" class="btn btn-primary" />
	</div>
	<div tabindex="-1" class="modal hide fade" id="selectUsers"
		data-keyboard="false" data-backdrop="static"></div>
</body>
</html>
