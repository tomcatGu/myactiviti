<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<head thy:merge="/common::headerFragment">
<title></title>

<script type="text/javascript" th:inline="javascript">
	/*<![CDATA[*/
	/////create on20162016年3月18日下午2:17:49 byxxb1029//////
	dojoConfig = {
		'packages' : [

		{
			location : /*[[@{'/dojo-release-1.10.4/dbootstrap'}]]*/'dojo-release-1.10.4/dbootstrap',
			name : 'dbootstrap'
		} ]
	};
	/*]]>*/
</script>
<style>
</style>
</head>
<body class="dbootstrap">
	<div class="column" id="tree">
		<h1>Tree</h1>
		<div id="divTree"></div>
	</div>
	<div class="column">
		<h1>Image</h1>
		<img id="image" />
	</div>
	<div th:include="/common::dojoScriptFragment"></div>

	<script type="text/javascript" th:inline="javascript">
		/*<![CDATA[*/
		/////create on20162016年3月18日下午2:17:49 byxxb1029//////

		require([ "dbootstrap" ], function(dbootstrap) {
			// Start application.
		});

		require(
				[ "dojo/dom", "dojo/json", "dojo/store/Memory",
						"dijit/tree/ObjectStoreModel", "dijit/Tree",
						"dojo/domReady!" ],
				function(dom, json, Memory, ObjectStoreModel, Tree) {

					// set up the store to get the tree data

					var data = '{"name" : "US Government","id" : "root","children" : [ {"name" : "Congress","id" : "congress"}, {"name" : "Executive","id" : "exec"	}, {"name" : "Judicial","id" : "judicial"} ]}';

					var governmentStore = new Memory({
						data : [ json.parse(data) ],
						getChildren : function(object) {
							return object.children || [];
						}
					});

					// set up the model, assigning governmentStore, and assigning method to identify leaf nodes of tree
					var governmentModel = new ObjectStoreModel({
						store : governmentStore,
						query : {
							id : 'root'
						},
						mayHaveChildren : function(item) {
							return "children" in item;
						}
					});

					// set up the tree, assigning governmentModel;
					var governmentTree = new Tree(
							{
								model : governmentModel,
								onOpenClick : true,
								onLoad : function() {
									dom.byId('image').src = '../resources/images/root.jpg';
								},
								onClick : function(item) {
									dom.byId('image').src = '../resources/images/'
											+ item.id + '.jpg';

								},
								persist : false
							}, "divTree");
					governmentTree.startup();
				});
		/*]]>*/
	</script>
</body>
</html>