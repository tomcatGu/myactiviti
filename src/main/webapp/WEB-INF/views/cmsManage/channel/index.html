<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<head thy:merge="/common::headerFragment">
<title></title>

<script type="text/javascript" th:inline="javascript">
	/*<![CDATA[*/
	/////create on20162016年3月18日下午2:17:49 byxxb1029//////
	dojoConfig = {
		'packages' : [

		{
			location : /*[[@{'/dojo-release-1.10.4/dbootstrap'}]]*/'dojo-release-1.10.4/dbootstrap',
			name : 'dbootstrap'
		} ]
	};
	/*]]>*/
</script>
<style>
</style>
</head>
<body class="dbootstrap">
	<div class="column" id="tree">
		<h1>Tree</h1>
		<div id="divTree"></div>
	</div>
	<div class="column">
		<h1>Image</h1>
		<img id="image" />
	</div>
	<div th:include="/common::dojoScriptFragment"></div>

	<script type="text/javascript" th:inline="javascript">
		/*<![CDATA[*/
		/////create on20162016年3月18日下午2:17:49 byxxb1029//////
		require([ "dbootstrap" ], function(dbootstrap) {
			// Start application.
		});

		require(
				[ "dojo/dom", "dojo/json", "dojo/store/JsonRest",
						"dijit/tree/ObjectStoreModel", "dijit/Tree",
						"dojo/domReady!" ],
				function(dom, json, JsonRest, ObjectStoreModel, Tree) {

					// set up the store to get the tree data

					var data = '{"name" : "US Government","id" : "root","children" : [ {"name" : "Congress","id" : "congress"}, {"name" : "Executive","id" : "exec"	}, {"name" : "Judicial","id" : "judicial"} ]}';

					var channelStore = new JsonRest({
						target : /*[[@{'/cmsManage/channel/data/'}]]*/"channel/data/",
						//data : [ json.parse(data) ],
						getChildren : function(object) {
							return this.get(object.id).then(
									function(fullObject) {
										return fullObject.children;
									})
						}
					});

					// set up the model, assigning governmentStore, and assigning method to identify leaf nodes of tree
					var channelModel = new ObjectStoreModel({
						store : channelStore,
						getRoot : function(onItem) {
							this.store.get("root").then(onItem);
						},

						mayHaveChildren : function(object) {
							return "children" in object;
						}
					});

					// set up the tree, assigning governmentModel;
					var channelTree = new Tree({
						model : channelModel
					/*onOpenClick : true,
					onLoad : function() {
						dom.byId('image').src = '../resources/images/root.jpg';
					},
					onClick : function(item) {
						dom.byId('image').src = '../resources/images/'
								+ item.id + '.jpg';

					},
					persist : false*/
					}, "divTree");
					channelTree.startup();
				});
		/*]]>*/
	</script>
</body>
</html>