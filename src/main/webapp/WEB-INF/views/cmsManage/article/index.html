<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<head thy:merge="/common::headerFragment">
<title></title>

<script type="text/javascript" th:inline="javascript">
	/*<![CDATA[*/
	/////create on20162016年3月18日下午2:17:49 byxxb1029//////
	dojoConfig = {
		'packages' : [

		{
			location : /*[[@{'/dojo-release-1.10.4/dbootstrap'}]]*/'dojo-release-1.10.4/dbootstrap',
			name : 'dbootstrap'
		} ]
	};
	/*]]>*/
</script>
<style>
</style>
</head>
<body class="dbootstrap">
	<div class="column" id="tree">
		<h1>ArticleGrid</h1>
		<div id="articleGrid"></div>
	</div>
	<button id="add-new-article">Add an article</button>

	<button id="delete-channel-node">Delete selected item</button>
	<div th:include="/common::dojoScriptFragment"></div>

	<script type="text/javascript" th:inline="javascript">
		/*<![CDATA[*/
		/////create on20162016年3月18日下午2:17:49 byxxb1029//////
		require([ "dbootstrap" ], function(dbootstrap) {
			// Start application.
		});

		require([ "dojo/query", "dojo/json", "dojo/data/ObjectStore",
				"dojox/grid/enhanced/plugins/Pagination",
				"dojox/grid/enhanced/plugins/Filter", "dojox/grid/DataGrid",
				"dojo/store/JsonRest", "dojo/store/Memory", "dojo/store/Cache",
				"dojo/domReady!" ], function(query, JSON, ObjectStore,
				Pagination, Filter, DataGrid, JsonRest, Memory, Cache) {

			// set up the store to get the tree data

			var articleStore = new JsonRest({
				target : /*[[@{'/cmsManage/article/data'}]]*/"article/data"

			});

			articleStore = new Cache(articleStore, new Memory());

			//*/

			// give store Observable interface so Tree can track updates
			//articleStore = new Observable(articleStore);
			// set up the model, assigning channelStore, and assigning method to identify leaf nodes of tree
			var articleModel = new ObjectStore({
				store : articleStore
			});

			// set up the tree, assigning governmentModel;
			var articleGrid = new DataGrid({
				store : articleModel,
				structure : [ {
					name : "ID",
					field : "id",
					width : "auto"
				}, {
					name : "Title",
					field : "title",
					width : "auto"
				}, {
					name : "created",
					field : "created",
					width : "auto"
				}, {
					name : "clicks",
					field : "clicks",
					width : "auto"
				} ],
				columnReordering : true,
				clientSort : true,
				rowSelector : '20px',
				rowsPerPage : 5,
				autoHeight : true
			}, "articleGrid");
			articleGrid.startup();

			query("#delete-channel-node").on("click", function() {

				del();

			});

			query("#add-new-article").on("click", function() {
			});

			function del() {

			}
			;

		});

		/*]]>*/
	</script>
</body>
</html>