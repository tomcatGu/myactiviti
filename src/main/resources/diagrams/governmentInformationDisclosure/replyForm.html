<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<head thy:merge="/common::headerFragment">
<meta http-equiv="Content-Type" content="text/html; charset=GB2312" />
<title>回复意见</title>
<style>
form {
	display: block;
	margin: 20px auto;
	background: #eee;
	border-radius: 10px;
	padding: 15px
}

#progress {
	position: relative;
	width: 400px;
	border: 1px solid #ddd;
	padding: 1px;
	border-radius: 3px;
}

#bar {
	background-color: #B4F5B4;
	width: 0%;
	height: 20px;
	border-radius: 3px;
}

#percent {
	position: absolute;
	display: inline-block;
	top: 3px;
	left: 48%;
}
</style>
<script type="text/javascript" th:inline="javascript">
	/*<![CDATA[*/
	$(document)
			.ready(
					function() {

						var options = {
							beforeSend : function() {
								$("#progress").show();
								//clear everything
								$("#bar").width('0%');
								$("#message").html("");
								$("#percent").html("0%");
							},
							uploadProgress : function(event, position, total,
									percentComplete) {
								$("#bar").width(percentComplete + '%');
								$("#percent").html(percentComplete + '%');

							},
							success : function() {
								$("#bar").width('100%');
								$("#percent").html('100%');

							},
							complete : function(response) {
								$("#message").html(
										"<font color='green'>"
												+ response.responseText
												+ "</font>");
							},
							error : function() {
								$("#message")
										.html(
												"<font color='red'> ERROR: unable to upload files</font>");

							}
						};
						$("#uploadForm").ajaxForm(options);
					});
	/*]]>*/
</script>
</head>
<body>
	<label>申请事项：</label>
	<label th:text="${applicationName}" />
	<table style="width: 100%;" border="1">
		<tr>
			<td rowspan="14">申请人信息</td>
			<td rowspan="5">公民</td>
			<td>姓名</td>
			<td><label th:text="${citizenName}" /></td>
			<td>工作单位</td>
			<td><label th:text="${citizenWorkunit}" /></td>
		</tr>
		<tr>
			<td>证件名称</td>
			<td><label th:text="${citizenCertificate}" /></td>
			<td>证件号码</td>
			<td><label th:text="${citizenCertificateID}" /></td>
		</tr>
		<tr>
			<td>联系电话</td>
			<td><label th:text="${citizenTelphone}" /></td>
			<td>邮件编码</td>
			<td><label th:text="${citizenZipcode}" /></td>
		</tr>
		<tr>
			<td>联系地址</td>
			<td><label th:text="${citizenAddress}" /></td>
			<td>传真</td>
			<td><label th:text="${citizenFax}" /></td>
		</tr>
		<tr>
			<td>电子邮箱</td>
			<td><label th:text="${citizenEmail}" /></td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td rowspan="4">法人/其它组织</td>
			<td>名称</td>
			<td><label th:text="${groupName}" /></td>
			<td>组织机构代码</td>
			<td><label th:text="${groupID}" /></td>
		</tr>
		<tr>
			<td>法人代表</td>
			<td><label th:text="${groupDelegate}" /></td>
			<td>联系人名称</td>
			<td><label th:text="${groupDelegateName}" /></td>
		</tr>
		<tr>
			<td>联系人电话</td>
			<td><label th:text="${groupDelegateTelphone}" /></td>
			<td>传真</td>
			<td><label th:text="${groupDelegateFax}" /></td>
		</tr>
		<tr>
			<td>联系地址</td>
			<td><label th:text="${groupDelegateAddress}" /></td>
			<td>电子邮箱</td>
			<td><label th:text="${groupDelegateEmail}" /></td>
		</tr>
		<tr>
			<td>申请时间</td>
			<td colspan="4"><label th:text="${applicationTime}" /></td>
		</tr>
		<tr>
			<td>提交部门</td>
			<td colspan="4"><label th:text="${submitDepartment}" /></td>
		</tr>
		<tr>
			<td rowspan="3">所需信息情况</td>
			<td>所需信息的内容描述</td>
			<td colspan="4"><label th:text="${description}" /></td>
		</tr>
		<tr>
			<td>所需信息的用途</td>
			<td colspan="4"><label th:text="${purpose}" /></td>
		</tr>
		<tr>
			<td>所需信息的指定提供方式</td>
			<td><input type="checkbox" value="0" name="mode"
				th:checked="${mode!=null?#lists.contains(#strings.listSplit(mode,','),'0'):false}" /><label>纸面</label><input
				type="checkbox" value="1" name="mode"
				th:checked="${mode!=null?#lists.contains(#strings.listSplit(mode,','),'1'):false}" /><label>电子邮件</label></td>
			<td>读取信息的方式</td>
			<td colspan="2"><input type="checkbox" value="0"
				name="obtainMode"
				th:checked="${obtainMode!=null?#lists.contains(#strings.listSplit(obtainMode,','),'0'):false}" /><label>电子邮件</label><input
				type="checkbox" value="1" name="obtainMode"
				th:checked="${obtainMode!=null?#lists.contains(#strings.listSplit(obtainMode,','),'1'):false}" /><label>传真</label><input
				type="checkbox" value="2" name="obtainMode"
				th:checked="${obtainMode!=null?#lists.contains(#strings.listSplit(obtainMode,','),'2'):false}" /><label>自行领取</label></td>
		</tr>
	</table>
	<div>
		<label>回复意见：</label>
		<form th:action="@{'/runtime/tasks/complete/'+${taskId}}"
			method="post">
			<textarea name="replay" rows="8" cols="20"></textarea>
			<input type="submit" value="回复" />
		</form>
	</div>
	<div>
		<label>上传附件：</label>
		<form id="uploadForm"
			th:action="@{'/runtime/tasks/uploadAttachment/'+${taskId}}"
			method="post" enctype="multipart/form-data">
			<input type="file" name="file" /> <input type="submit" value="上传" />
		</form>
		<div id="progress">
			<div id="bar"></div>
			<div id="percent">0%</div>
		</div>
		<div id="message"></div>
	</div>
</body>
</html>