<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<head thy:merge="/common::headerFragment">
<title>统计列表</title>
<script src="/bootstrap/js/plugins/jqplot.json2.min.js"
	type="text/javascript"
	th:src="@{/bootstrap/js/plugins/jqplot.json2.min.js}"></script>
<script src="/bootstrap/js/plugins/jqplot.barRenderer.min.js"
	type="text/javascript"
	th:src="@{/bootstrap/js/plugins/jqplot.barRenderer.min.js}"></script>
<script src="/bootstrap/js/plugins/jqplot.categoryAxisRenderer.min.js"
	type="text/javascript"
	th:src="@{/bootstrap/js/plugins/jqplot.categoryAxisRenderer.min.js}"></script>
<script src="/bootstrap/js/plugins/jqplot.pointLabels.min.js"
	type="text/javascript"
	th:src="@{/bootstrap/js/plugins/jqplot.pointLabels.min.js}"></script>
<script type="text/javascript" src="../excanvas.compiled.js"
	th:src="@{/bootstrap/js/excanvas.compiled.js}"></script>
<script type="text/javascript" th:inline="javascript">
	/*<![CDATA[*/
	function render(data) {
		var newRow = "<tr><td><input type=\"checkbox\" /></td><td>" + data.id
				+ "</td><td>" + data.name + "</td><td>" + data.assignee
				+ "</td><td><a href=\"claim/"+data.id+"\">接受</a></td></tr>";
		return newRow;
	};
	$(document)
			.ready(
					function() {
						$
								.ajax({
									type : "GET", //提交的类型
									dataType : "json",
									url : /*[[@{'/statistical/counter/policemenVote:35:7224?statisticalRange=policeman&separatorChars=,'}]]*/"", //提交地址
									success : function(data) {
										var dataValue = new Array(); //数据
										var ticks = new Array(); //横坐标值
										if (ticks.length == 0) {
											ticks = [ "曹松华", "陈李军", "戴金风",
													"刘加武", "陆枢琦", "茅健", "茅金吉",
													"孟俊伟", "秦志锋", "饶玉琪", "沈天龙",
													"宋宇飞", "吴江峰", "吴俊钱", "严春林",
													"杨萌" ];
											dataValue = [ 0, 0, 0, 0, 0, 0, 0,
													0, 0, 0, 0, 0, 0, 0, 0, 0 ];

										}
										for (aData in data.statisticalResult) {
											//ticks.push(aData);
											var i=0;
											for(i=0;i<ticks.length;i++){
												if(ticks[i]==aData)
													break;
												
											}
											dataValue[i]=data.statisticalResult[aData];
											//dataValue
											//		.push(parseInt(data.statisticalResult[aData]));

										}

										$("#chart").html("");
										var plot1 = $
												.jqplot(
														'chart',
														[ dataValue ],
														{
															animate : !$.jqplot.use_excanvas, //是否动画显示
															seriesDefaults : {
																renderer : $.jqplot.BarRenderer, // 利用渲染器（BarRenderer）渲染现有图表
																pointLabels : {
																	show : true
																}
															},
															title : '得票统计表', //标题
															axes : {
																xaxis : {
																	renderer : $.jqplot.CategoryAxisRenderer, // 设置横（纵）轴上数据加载的渲染器
																	ticks : ticks
																//设置横（纵）坐标的刻度上的值，可为该ticks数组中的值
																},
																yaxis : {
																	min : 0,
																	tickInterval : 1,
																	pad : 2, // 一个相乘因子
																	tickOptions : {
																		formatString : '%d'
																	}

																}
															}
														});
									}
								});

					});
	/*]]>*/
</script>
<style>
.hover {
	background-color: #cccc00;
}
</style>
</head>
<body>
	<div class="box">
		<h1>统计</h1>
		<div id="chart" style="height: 300px; width: 90%"></div>
	</div>
</body>
</html>
