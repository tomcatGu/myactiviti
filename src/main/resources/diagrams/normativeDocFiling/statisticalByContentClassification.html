<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head thy:merge="/common::headerFragment">
<title>已备案规范性文件按分类统计</title>
<meta http-equiv="Content-Type" content="text/html; charset=GB2312" />
<script type="text/javascript" th:inline="javascript">
	/*<![CDATA[*/
	function percentNum(num, num2) {
		if (num2 == 0)
			return "0.00%";
		if (num == undefined)
			return "0.00%";
		return (Math.round(num / num2 * 10000) / 100.00 + "%"); //小数点后两位百分比
	};
	function shape(num) {

		if (num == undefined)
			return 0;
		else
			return num;
	};

	$(document)
			.ready(
					function() {
						$('.date-picker').datepicker({
							language : 'zh-CN',
							autoclose : true
						}).next().on(ace.click_event, function() {
							$(this).prev().focus();
						});
						function render(data) {
							var newRow = "<tr><td><input type=\"checkbox\" name=\"selectFlag\" value=\""+data.id+"\"></input></td><td>"
									+ data.id
									+ "</td><td>"
									+ data.organizationName
									+ "</td><td>"
									+ shape(data.total)
									+ "</td><td>"
									+ shape(data["党员"])
									+ "</td><td>"
									+ shape(data["党的组织制度"])
									+ "</td><td>"
									+ shape(data["党组织"])
									+ "</td><td>"
									+ shape(data["党的干部"])
									+ "</td><td>"
									+ shape(data["党的纪律"])
									+ "</td><td>"
									+ shape(data["政治"])
									+ "</td><td>"
									+ shape(data["经济"])
									+ "</td><td>"
									+ shape(data["社会"])
									+ "</td><td>"
									+ shape(data["宣传"])
									+ "</td><td>"
									+ shape(data["统战"])
									+ "</td><td>"
									+ shape(data["民族宗教"])
									+ "</td><td>"
									+ shape(data["外事对台"])
									+ "</td><td>"
									+ shape(data["其他"]) + "</td></tr>";
							return newRow;
						}
						;

						$("#statisticalByOrganizationButton")
								.click(
										function() {
											$
													.ajax({
														type : "POST", //提交的类型
														dataType : "json",
														data : {
															startTime : $(
																	"#startTime")
																	.val(),
															endTime : $(
																	"#endTime")
																	.val()

														},
														url : /*[[@{'/normativeStatistical/analyseByContentClassification'}]]*/"", //提交地址
														success : function(data) {
															$(
																	"#normativeDocFilingList tr")
																	.nextAll()
																	.remove();
															for (result in data.statisticalResult) {
																var newRow = render(data.statisticalResult[result]);
																$(
																		"#normativeDocFilingList")
																		.find(
																				"tr:last")
																		.after(
																				newRow);

															}

														}
													});
										});

					});

	/*]]>*/
</script>
</head>
<body>
	<form class="form-inline">
		<div class="control-group">
			<div class="row">
				<div class="span9">
					<div class="controls">
						<label class="control-label text-info">开始时间：</label>
						<div class="input-group">
							<input class="form-control date-picker" type="text"
								data-date-format="mm/dd/yyyy" name="startTime" id="startTime" />
							<span class="input-group-addon"> <i
								class="icon-calendar bigger-110"></i>
							</span>
						</div>
						<label class="control-label text-info">结束时间：</label>
						<div class="input-group">
							<input class="form-control date-picker" type="text"
								data-date-format="mm/dd/yyyy" name="endTime" id="endTime" /> <span
								class="input-group-addon"> <i
								class="icon-calendar bigger-110"></i>
							</span>
						</div>
						<input type="button" id="statisticalByOrganizationButton"
							value="统计" class="btn btn-primary" />
					</div>
				</div>
			</div>
		</div>
	</form>
	<table id="normativeDocFilingList" cellpadding="0" cellspacing="0"
		border="0" class="table table-striped table-bordered table-hover">
		<thead>
			<tr>
				<th><input type="checkbox" id="checkAll" /></th>
				<th>编号</th>
				<th>部门名称</th>
				<th>总计</th>
				<th>党员</th>
				<th>党的组织制度</th>
				<th>党组织</th>
				<th>党的干部</th>
				<th>党的纪律</th>
				<th>政治</th>
				<th>经济</th>
				<th>社会</th>
				<th>宣传</th>
				<th>统战</th>
				<th>民族宗教</th>
				<th>外事对台</th>
				<th>其他</th>
			</tr>
		</thead>
		<tbody>
			<tr th:remove="all">
				<td>001</td>
				<td>部门</td>
				<th>100</th>
				<th>90。0%</th>
				<th>100%</th>
				<th>90</th>
				<th>90%</th>
				<th>10</th>
				<th>10%</th>
			</tr>
		</tbody>
	</table>
</body>
</html>